{#each posts as post}
<h1>{post.metadata.title}</h1>
<section>
  {@html post.html}
</section>
<!-- <Markdown :source /> -->
{:else}
No posts
{/each}


<script>
  const source = `\
# Hi there
I'm working on a SSG blog;
- Powered by Sapper
- Markdown files
- CI edit flow
- Inline edit capabilities

It's going to be awesome :)
`
  export default {
    components: {
      // Markdown: '../components/Markdown.html'
    },
    data: () => ({
      source
    }),
    preload () {
      return this.fetch('api/blog')
        .then(r => r.json())
        .then(posts => {
          console.log("Got posts:", posts)
          return { posts };
        })
        .catch(e => {
          console.log("Received error", e);
          return e
        })
    }
  }
</script>
